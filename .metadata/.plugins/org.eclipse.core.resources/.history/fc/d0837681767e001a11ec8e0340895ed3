package com.mes.api.test;

import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;
import java.util.logging.Logger;
import java.util.ArrayList;
import java.util.logging.Level;

import com.mes.api.common.ApiHelper;
import com.mes.api.common.RestAssuredUtility;
import io.restassured.path.json.JsonPath;
import io.restassured.response.Response;

public class ValidatePosts {
	
	public static final Logger LOGGER = Logger.getLogger(Logger.GLOBAL_LOGGER_NAME);
//	A better approach will be to store it in .properties file rather than hard coding in every test
	String baseURI = "http://qainterview.merchante-solutions.com:3030";
	private Response response = null;
	private JsonPath jasonPath = null;
	
	@BeforeTest
	public void setUp() {
		response = RestAssuredUtility.getRequest(baseURI, "/posts");
	}
	
	@Test(priority = 1)
	public void verifyStatusCode() {
		ApiHelper.isStatusCode200(response);
	}
	
	@Test
	public  void getDetails() {
		jsonPath = RestAssuredUtility.getJasonPath(response);
		ArrayList postsList = jsonPath.get("title");
		for(int i =0; i < postsList.size()-1; i++) {
			LOGGER.info("The ids are " +postsList.get(i));
		}
	}

	
	@AfterTest
	public void teardown() {
		RestAssuredUtility.resetBaseUri(baseURI);
	}
	
	
	
}
